<!DOCTYPE html>
<html lang="en">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Add Groups- EquiSplit</title>
    <!-- Favicons -->
    <link href="img/favicon.png" rel="icon">
    <link href="img/apple-touch-icon.png" rel="apple-touch-icon">

    <!-- Google Fonts -->
    <link href="https://fonts.gstatic.com" rel="preconnect">
    <link
        href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Nunito:300,300i,400,400i,600,600i,700,700i|Poppins:300,300i,400,400i,500,500i,600,600i,700,700i"
        rel="stylesheet">

    <!-- Vendor CSS Files -->
    <link href="vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <link href="vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
    <link href="vendor/boxicons/css/boxicons.min.css" rel="stylesheet">
    <link href="vendor/quill/quill.snow.css" rel="stylesheet">
    <link href="vendor/quill/quill.bubble.css" rel="stylesheet">
    <link href="vendor/remixicon/remixicon.css" rel="stylesheet">
    <link href="vendor/simple-datatables/style.css" rel="stylesheet">

    <!-- Template Main CSS File -->
    <link href="css/style.css" rel="stylesheet">
    <style>
        .highlighted {
            font-weight: bold;
            color: black;
        }
    </style>
</head>



<body class="">


    <!-- Start Header Area -->

    <%- include("Header") %>
        <!-- End Header Area -->


        <!-- Start Sidebar Area -->

        <%- include("Sidebar") %>
            <!-- End Sidebar Area -->


            <main id="main" class="main">
                <div class="pagetitle">
                    <h1>Add Group</h1>
                    <nav>
                        <ol class="breadcrumb">
                            <li class="breadcrumb-item"><a href="#">Groups</a></li>
                            <li class="breadcrumb-item active">Add Group</li>
                        </ol>
                    </nav>
                </div><!-- End Page Title -->



                <section class="section dashboard">
                    <div class="row">
                        <div class="col-12">

                            <div class="container">
                                <div class="card">
                                    <div class="card-body">
                                        <h5 class="card-title">Add Group</h5>

                                        <!-- Vertical Form -->
                                        <form class="row g-3">
                                            <div class="col-12">
                                                <label for="groupname" class="form-label" >Group Name</label>
                                                <input type="text" class="form-control" id="groupname" required>    
                                            </div>
                                            
                                            <div class="col-12">
                                                <label for="members" class="form-label">Members</label>
                                                <div id="members" contenteditable="true" class="form-control"></div>
                                                
                                            </div>
                                           
                                            <div class="text-center">
                                                <button type="submit" class="btn btn-primary">Submit</button>
                                                <button type="reset" class="btn btn-secondary">Reset</button>
                                            </div>
                                        </form><!-- Vertical Form -->

                                    </div>
                                </div>

                            </div>
                        </div>




                    </div>


                </section>

            </main>


            <!-- Links of JS files -->
            <!-- Vendor JS Files -->
            <script src="vendor/apexcharts/apexcharts.min.js"></script>
            <script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
            <script src="vendor/chart.js/chart.umd.js"></script>
            <script src="vendor/echarts/echarts.min.js"></script>
            <script src="vendor/quill/quill.js"></script>
            <script src="vendor/simple-datatables/simple-datatables.js"></script>
            <script src="vendor/tinymce/tinymce.min.js"></script>
            <script src="vendor/php-email-form/validate.js"></script>
            <script src='/js/jquery.min.js'></script>

            <!-- Template Main JS File -->
            <script src="js/main.js"></script>


            <script type="text/javascript">

                $(document).ready(function () {
                    var currentName = ""; // Variable to store the current name being typed
                    var overAllName = ""; // Variable to store all the name added 
                    var $namesInput = $("#members");

                    // Event listener for keyup event on input field
                    $namesInput.on("keyup", function (event) {
                        var input = $(this).val().trim();
                        var keycode = event.keyCode;
                        var key = event.key;

                        // If space is entered then save that to overAllName var and show names in input
                        if (key === " " && currentName !== "") {
                            overAllName += currentName +" ";
                            addNameToList(overAllName.trim());
                            currentName = "";
                        }
                        // Check if alphabet is pressed
                        else
                            if (keycode >= 65 && keycode <= 90) {

                                currentName += key;
                            }
                    });

                    //Add member names to input
                    function addNameToList(name) {
                        var highlightedName = '<span class="highlighted">' + name + '</span> &nbsp;';
                        $namesInput.html(highlightedName);
                        

                        //Typing cursor to start from end 
                        var range = document.createRange();
                        var selection = window.getSelection();
                        range.selectNodeContents($namesInput[0]);
                        range.collapse(false);
                        selection.removeAllRanges();
                        selection.addRange(range);
                        $namesInput.focus();
                    }


                    

                });
            </script>
</body>

</html>